<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8" />
      <title>Infro</title>
      <script src="http://d3js.org/d3.v2.js"></script>
      <script src="https://raw.github.com/cakey/infro/master/mootools-1.4.5.js"></script>
      <script src="https://raw.github.com/cakey/infro/master/mootools-more-1.4.0.1.js"></script> 
      <script src="https://raw.github.com/cakey/infro/master/chosen/chosen.js"></script>
      <script src="https://raw.github.com/cakey/infro/master/infro.js"></script>
      <link rel="stylesheet" href="infro.css" type="text/css" />
      <link rel="stylesheet" href="chosen.css" type="text/css" />
   </head>
   <body>
   <div id="visualisation"></div>
   <script>
   
      infro.init({
         root_div: "visualisation",
         data: {
            type: "csv",
            url: "HDR_2011_cleaned.csv"
         },
         formatters: {},
         unit: "Countries",
         topx: 4,
         more_info_url: "http://en.wikipedia.org/wiki/{{{Country}}}",
         metrics:{
            "Std Dev": function(x) {
                 var n = x.length;
                 if (n < 1) return NaN;
                 if (n === 1) return 0;
                 var mean = d3.mean(x),
                     i = -1,
                     s = 0;
                 while (++i < n) {
                   var v = x[i] - mean;
                   s += v * v;
                 }
                 return Math.sqrt(s / (n - 1));
               }
         },
         filterables: {
          
            Country:{
               type: "discrete",
            },
            "HD rank":{
               type: "continuous",
               scale: infro.scales.linear
            },
            
            Subregion:{
               type: "discrete",
            },
            Region:{
               type: "discrete",
            },
            "Life expectancy":{
               type: "continuous",
               scale: infro.scales.linear
            },       
            "GNI per capita":{
               type: "continuous",
               scale: infro.scales.linear
            },   
            "Well being":{
               type: "continuous",
               scale: infro.scales.linear
            },   
            "Fertility rate":{
               type: "continuous",
               scale: infro.scales.linear
            }       
         }

      });
   </script>
   </body>
</html>